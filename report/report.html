<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>再生したい曲リスト</title>
    <link rel="stylesheet" href="report.css">
</head>
<body>
    <h1>再生したい曲リスト</h1>
    <div id="app">
        <input type="text" id="song-name" placeholder="曲名を入力">
        <button id="add-song">追加</button>
        <ul id="song-list"></ul>
    </div>

    <script>
        const apiUrl = "http://localhost:3000";
        const songList = document.getElementById("song-list");
        const songNameInput = document.getElementById("song-name");

        // 曲リストを取得して表示
        async function fetchSongs() {
            const response = await fetch(`${apiUrl}/songs`);
            const songs = await response.json();
            renderSongs(songs);
        }

        // 曲をリストとして表示
        function renderSongs(songs) {
            songList.innerHTML = "";
            songs.forEach(song => {
                const li = document.createElement("li");
                li.className = "song";
                li.innerHTML = `<span>${song.name}</span>`;
                songList.appendChild(li);
            });
        }

        // 新しい曲を追加
        async function addSong(name) {
            await fetch(`${apiUrl}/songs`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ name })
            });
            fetchSongs();
        }

        // 追加ボタンのクリックイベント
        document.getElementById("add-song").addEventListener("click", () => {
            const songName = songNameInput.value.trim();
            if (songName) {
                addSong(songName);
                songNameInput.value = "";
            }
        });

        // 初期曲リストの表示
        fetchSongs();
    </script>
</body>
</html>
